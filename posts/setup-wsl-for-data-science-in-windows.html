<!DOCTYPE html>
<html lang="en" data-theme="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>zmudzinski.sh</title>
        <meta name="description" content="I write Python code and do nerdy things.">
        <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
        <link rel="stylesheet" href="https://zmudzinski.sh/theme/css/code.css" />
        <link rel="stylesheet" href="https://zmudzinski.sh/theme/css/page.css" />
        <link rel="icon" href="/favicon.ico">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
        <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="manifest" href="/site.webmanifest">
    </head>
    <body class="bg-neutral-950 text-neutral-100 font-mono">
        <main role="main">
            <div class="container max-w-4xl mx-auto px-4 sm:px-6 md:px-8">
<h1 class="text-4xl mt-20"><a href="https://zmudzinski.sh">zmudzinski.sh</a></h1>
<h2 class="text-sm text-neutral-500">I write Python code and do nerdy things.</h2>

<ul class="mt-5 flex space-x-4">
    <li><a class="underline" href="https://zmudzinski.sh">Posts</a></li>
    <li><a class="underline" href="https://zmudzinski.sh/pages/about">About</a></li>
    <li><a class="underline" href="https://zmudzinski.sh/pages/projects">Projects</a></li>
    <li><a class="underline" href="https://zmudzinski.sh/pages/family">Family</a></li>
</ul><article class="prose prose-invert font-mono max-w-4xl mt-20">
    <h1>Setup WSL for Data Science in Windows</h1>
    <h2 class="text-sm text-neutral-500 -mt-6 mb-10">Created on: 2019.10.03</h2>
    <p>Let’s be honest - I’m not a Windows user, but sometimes you might get to a point where you are going to need a Windows machine for your daily Data Science tasks. With the support for Ubuntu, thanks to Windows Subsystem for Linux (WSL), I tried to make everything - between django and data science - work together and today I want to share how I made it happen.</p>
<p>This tutorial is divided into a few steps: installing the WSL, pimping it up with Anaconda Python distribution, setting up VSCode to work with bash instead of Powershell and setting up Docker to host our Data Science projects. Let’s get right to it!</p>
<h2>Install WSL</h2>
<p>To install WSL on your PC you first need to enable it on your machine. To do that, you need to start Powershell as Administrator and run the following command (you will need to restart your computer when prompted):</p>
<div class="codehilite"><pre><span></span><code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
</code></pre></div>

<p>After you do this step, you need to go to the Microsoft Store app and install any distribution of Linux, for my case it was Ubuntu 18.04 LTS. Once you go through the installation process and set up your bash credentials you are good to go. Mind that you don’t need to use the provided Ubuntu Console app as the <code>bash</code> command activates WSL in any command terminal.</p>
<h2>Get Anaconda</h2>
<p>I found a way to install the Anaconda distribution easily on WSL. First of all you need to figure out which anaconda release you want. A list of Anaconda installers is available here (remember to pick a Linux installer!):</p>
<ul>
<li><a href="https://repo.anaconda.com/archive/">Anaconda Installer archive</a></li>
</ul>
<p>Now that you have picked your version you need to run the following command:</p>
<div class="codehilite"><pre><span></span><code><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">repo</span><span class="o">.</span><span class="n">continuum</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="p">{</span><span class="n">SELECTED</span> <span class="n">VERSION</span><span class="p">}</span>

<span class="c1"># Example:</span>
<span class="c1"># wget https://repo.continuum.io/archive/Anaconda3-2019.07-Linux-x86_64.sh</span>
</code></pre></div>

<p>Now you need to run the installation script:</p>
<div class="codehilite"><pre><span></span><code><span class="n">bash</span> <span class="p">{</span><span class="n">SELECTED</span> <span class="n">VERSION</span><span class="p">}</span><span class="o">.</span><span class="n">sh</span>

<span class="c1"># Example:</span>
<span class="c1"># bash Anaconda3-2019.07-Linux-x86_64.sh</span>
</code></pre></div>

<p>You will have to go through the license agreement (just hold ENTER, I don’t believe you will read those anyway) and at the end you will need to agree to it by writing <code>yes</code>.</p>
<p>Now reopen your terminal and run <code>which python</code> to see if this worked!</p>
<h2>Setup Visual Studio Code</h2>
<p>Assuming you have Visual Studio Code installed on your Windows machine, we need to run it and change the following setting:</p>
<div class="codehilite"><pre><span></span><code><span class="s2">&quot;terminal.integrated.shell.windows&quot;</span>:<span class="w"> </span><span class="s2">&quot;C:\\WINDOWS\\sysnative\\bash.exe&quot;</span>
</code></pre></div>

<p>Right now, every time you run the terminal in VSCode you should get the bash console. I still have to figure out how to load a specific WSL Anaconda environment when it starts (depending on the opened project), but once you activate it manually everything should work just fine.</p>
<p>You should also install the following addons:</p>
<ul>
<li>Python</li>
<li>Remote - WSL</li>
</ul>
<h2>Making Docker work</h2>
<p>Last step everyone! Making Docker for Windows work with our WSL distribution. First of all, we need to expose the Daemon on tcp (mind that this is without TLS, so in theory you might be vulnerable to remote attacks. In practice, for local developement this won’t be an issue).</p>
<p>We want to add the docker host to our bash source, so it connects to our daemon every time we open the terminal (a nice quality of life thing, you don’t need to do this):</p>
<div class="codehilite"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export DOCKER_HOST=tcp://localhost:2375&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>

<h3>Installing Docker and Docker-Compose</h3>
<p>To push our changes to docker containers, we need to create a Dockerfile or a docker-compose. So let’s install both! As described in the Docker Ubuntu installation documentation we need to do the following to install Docker:</p>
<ol>
<li>Update the apt package index</li>
</ol>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</code></pre></div>

<ol>
<li>Install packages to allow apt to use a repository over HTTPS</li>
</ol>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>apt-transport-https<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>ca-certificates<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>curl<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>gnupg-agent<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>software-properties-common
</code></pre></div>

<ol>
<li>Add Docker’s official GPG key</li>
</ol>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://download.docker.com/linux/ubuntu/gpg<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>apt-key<span class="w"> </span>add<span class="w"> </span>-
</code></pre></div>

<ol>
<li>Verify that you now have the key with the fingerprint <code>9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88</code>, by searching for the last 8 characters of the fingerprint</li>
</ol>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt-key<span class="w"> </span>fingerprint<span class="w"> </span>0EBFCD88
</code></pre></div>

<ol>
<li>Use the following command to set up the stable repository. To add the nightly or test repository, add the word <code>nightly</code> or <code>test</code> (or both) after the word stable in the commands below</li>
</ol>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>add-apt-repository<span class="w"> </span><span class="se">\</span>
<span class="s2">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span>
<span class="k">$(</span>lsb_release<span class="w"> </span>-cs<span class="k">)</span><span class="s2"> \</span>
<span class="s2">stable&quot;</span>
</code></pre></div>

<ol>
<li>Update the apt package index</li>
</ol>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</code></pre></div>

<ol>
<li>Install the latest version of Docker Engine - Community and containerd</li>
</ol>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>docker-ce<span class="w"> </span>docker-ce-cli<span class="w"> </span>containerd.io
</code></pre></div>

<ol>
<li>If you would like to use Docker as a non-root user, you should now consider adding your user to the “docker” group with something like the following:</li>
</ol>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>docker<span class="w"> </span>your-user
</code></pre></div>

<ol>
<li>nally we can install <code>docker-compose</code>. If you want to install that under some specific env, remember to <code>conda avtivate</code> it first.</li>
</ol>
<div class="codehilite"><pre><span></span><code>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>docker-compose

<span class="c1"># If you want to use pip instead:</span>
<span class="c1"># pip install docker-compose</span>
</code></pre></div>

<h3>Fixing drive mounting</h3>
<p>If you want your drives mounted as <code>/c</code> or <code>/d</code> instead of <code>/mnt/c</code> or <code>/mnt/d</code> (and you probably do, because some scripts might go crazy over that), you need to modify the WSL configuration file. Open it using the following command: <code>sudo nano /etc/wsl.conf</code> and add the following:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[automount]</span>
<span class="na">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/</span>
<span class="na">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;metadata&quot;</span>
</code></pre></div>

<h3>Active Directory fuckup help</h3>
<p>If you are logged in as an <strong>Active Directory</strong> user, life won’t be easy for you. You will notice that you can’t share drives with Docker as the user credentials are invalid. I found only one solution to this and it’s a bit hacky: you need to create a local user with the same name as the ActiveDirectory one… Hey, it works!</p>
</article>
<footer class="mt-20 mb-20 text-sm text-neutral-500">
    <p>Site built with <a class="underline" href="https://getpelican.com/">Pelican</a> and hosted on <a class="underline" href="https://github.com/lukzmu/personal-website">GitHub</a>.</p>
    <p>&copy; 2026 zmudzinski.sh - from Poland with code.</p>
</footer>            </div>
        </main>
    </body>
</html>